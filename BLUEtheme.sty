% --------------------------------------------------------------------------
% Version 2.1
% This template is available on the sites:
% https://www.overleaf.com/read/rpkkfchcnbsc
% https://www.overleaf.com/latex/templates/itmo-beamer-theme/fpttrgnmqwsb
% https://github.com/AlexZabashta/ITMO-Beamer-theme
% --------------------------------------------------------------------------

\usepackage[utf8]{inputenc}
\usepackage{float}
\usepackage{amsmath,amssymb}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{textpos}
\usepackage{pgfplots}
\usepackage{smartdiagram}
\usepackage{multimedia}

\usetheme[sectionstyle=style2]{trigon}

%\usepackage{fontspec}
%\usepackage{iflang}

%\setmonofont{Courier New}
%\defaultfontfeatures{Ligatures=TeX}
%\setmainfont{Times New Roman}
%\setsansfont{Arial}
%\setsansfont{Calibri.ttf}


\definecolor{ITMOblue}{RGB}{14,40,109} 
\definecolor{ITMObluealt}{RGB}{0,144,255}
\definecolor{ITMOred}{RGB}{255,0,20} 
\definecolor{ITMOwhite}{RGB}{255,255,255} 

\definecolor{ITMOorange}{RGB}{255,132,0}
\definecolor{ITMOsky}{RGB}{57,180,230}
\definecolor{ITMOpistachio}{RGB}{150,214,0}
\definecolor{ITMOaqua}{RGB}{34,172,155}
\definecolor{ITMOice}{RGB}{91,193,214}
\definecolor{ITMOgold}{RGB}{255,222,23} 
\definecolor{ITMOyellow}{RGB}{235,231,14} 
\definecolor{ITMOtomato}{RGB}{234,65,38}
\definecolor{ITMOgreen}{RGB}{0,148,77} 


\setbeamercolor{title}{fg=ITMOwhite}
\setbeamercolor{frametitle}{fg=ITMOwhite,bg=ITMOblue}

\setbeamercolor{alerted text}{fg=ITMOtomato}
\setbeamercolor{block title alerted}{fg=ITMOtomato}

\setbeamercolor{caption name}{fg=ITMOblue}
\setbeamercolor{footline}{fg=ITMOwhite,bg=ITMOblue}
\setbeamercolor{headline}{fg=ITMOwhite,bg=ITMOblue}

\setbeamertemplate{itemize item}[circle]
\setbeamertemplate{itemize subitem}[circle]
\setbeamertemplate{itemize subsubitem}[circle]
\setbeamercolor{itemize item}{fg=ITMOred}
\setbeamercolor{itemize subitem}{fg=ITMOred}
\setbeamercolor{itemize subsubitem}{fg=ITMOred}
\setbeamercolor{enumerate item}{fg=ITMOred}
\setbeamercolor{enumerate subitem}{fg=ITMOred}
\setbeamercolor{enumerate subsubitem}{fg=ITMOred}
\setbeamercolor{item projected}{fg=ITMOred}

\newcommand{\polygons}[1]{
\tikz[remember picture,overlay] \node at (current page.center){
	\includegraphics[height=\paperheight,width=\paperwidth]{img/polygons.pdf}
};
\tikz \node at (current page.center){
	\begin{minipage}[t][0.97\paperheight][c]{0.843\paperwidth}
		\begin{center}
			\usebeamercolor[fg]{title}{
				#1
			}
		\end{center}
	\end{minipage}
};
}

\setbeamertemplate{title page}{
	\polygons{
	    \begin{center}
	        \vspace{}
    		\usebeamerfont{titlegraphic}{\inserttitlegraphic}
    		
    		\vspace{1cm}
    		\usebeamerfont{title}{\inserttitle} 
    		\vspace{1cm}
    		\usebeamerfont{subtitle}{\insertsubtitle}

    		\insertauthor
    		
    		\insertplace \hspace{} -  \insertdate
            \vspace{}
		\end{center}
	}
}

\setbeamertemplate{end page}{
	\polygons{
	    \begin{center}
	        \vspace{}
    		\usebeamerfont{titlegraphic}{\inserttitlegraphic}
    		
    		\vspace{1cm}
    		\usebeamerfont{title}{Merci pour votre attention} 
    		
            \vspace{}
		\end{center}
	}
}


\def \insertplace {}
\newcommand{\where}[1]{ \def \insertplace {#1} }


\def \insertfootlinetext {\inserttitle}
\newcommand{\setfootlinetext}[1]{ \def \insertfootlinetext {#1} }


\setbeamertemplate{navigation symbols}{}
%\setbeamertemplate{footline}[page number]{}
\setbeamerfont{footnote}{size=\scriptsize}

\setbeamertemplate{footline}{\colorbox{ITMOblue}{\begin{minipage}[c][0.04\textheight][c]{0.83\paperwidth}\hskip1em\insertfootlinetext\hfill\end{minipage}}\colorbox{ITMObluealt}{\begin{minipage}[c][0.04\textheight][c]{0.15\paperwidth}\begin{center}\small\textbf{\insertframenumber/\inserttotalframenumber}\end{center}\end{minipage}}}
%
\setbeamerfont{footline}{size=\footnotesize}
\setbeamerfont{frametitle}{size=\bf\Large}